@import "screenshift-responsive";

$screenshift-spacing-xs: 4px !default;
$screenshift-spacing-sm: 8px !default;
$screenshift-spacing-md: 12px !default;
$screenshift-spacing-lg: 16px !default;
$screenshift-spacing: $screenshift-spacing-sm !default; // Default general spacing
$screenshift-debug-color: red !default;

// Extract all breakpoint values and labels
$bp-xxxl-min: map-get(map-get($screenshift-breakpoints, xxxl), min);
$bp-xxl-max: map-get(map-get($screenshift-breakpoints, xxl), max);
$bp-xl2-max: map-get(map-get($screenshift-breakpoints, xl2), max);
$bp-xl-max: map-get(map-get($screenshift-breakpoints, xl), max);
$bp-lg-max: map-get(map-get($screenshift-breakpoints, lg), max);
$bp-md-max: map-get(map-get($screenshift-breakpoints, md), max);
$bp-sm-max: map-get(map-get($screenshift-breakpoints, sm), max);
$bp-xs-max: map-get(map-get($screenshift-breakpoints, xs), max);

$label-xxxl: map-get(map-get($screenshift-breakpoints, xxxl), label);
$label-xxl: map-get(map-get($screenshift-breakpoints, xxl), label);
$label-xl2: map-get(map-get($screenshift-breakpoints, xl2), label);
$label-xl: map-get(map-get($screenshift-breakpoints, xl), label);
$label-lg: map-get(map-get($screenshift-breakpoints, lg), label);
$label-md: map-get(map-get($screenshift-breakpoints, md), label);
$label-sm: map-get(map-get($screenshift-breakpoints, sm), label);
$label-xs: map-get(map-get($screenshift-breakpoints, xs), label);

// Container max-width extraction
$container-max-width-xxxl: map-get(
  map-get($screenshift-breakpoints, xxxl),
  container-max-width
);
$container-max-width-xxl: map-get(
  map-get($screenshift-breakpoints, xxl),
  container-max-width
);
$container-max-width-xl2: map-get(
  map-get($screenshift-breakpoints, xl2),
  container-max-width
);
$container-max-width-xl: map-get(
  map-get($screenshift-breakpoints, xl),
  container-max-width
);
$container-max-width-lg: map-get(
  map-get($screenshift-breakpoints, lg),
  container-max-width
);
$container-max-width-md: map-get(
  map-get($screenshift-breakpoints, md),
  container-max-width
);
$container-max-width-sm: map-get(
  map-get($screenshift-breakpoints, sm),
  container-max-width
);
$container-max-width-xs: map-get(
  map-get($screenshift-breakpoints, xs),
  container-max-width
);

[screenshift] {
  width: 100%;
  margin-left: auto;
  margin-right: auto;

  // --- Define Container Breakpoints & Max Widths ---
  // DEFAULT (Largest / Desktop First)
  max-width: $container-max-width-xxxl;
  padding-left: 0;
  padding-right: 0;

  // Viewport maximum <= XXXL
  @media (min-width: 1599px) {
    max-width: 1600px;
  }

  // Viewport <= XL2
  @media (max-width: calc(#{$bp-xxl-max} - 1px)) {
    max-width: $container-max-width-xl2;
  }

  // Viewport <= XL
  @media (max-width: calc(#{$bp-xl2-max} - 1px)) {
    max-width: $container-max-width-xl;
  }

  // Viewport <= LG
  @media (max-width: calc(#{$bp-xl-max} - 1px)) {
    max-width: $container-max-width-lg;
  }

  // Viewport <= MD
  @media (max-width: calc(#{$bp-lg-max} - 1px)) {
    max-width: $container-max-width-md;
  }

  // Viewport <= SM
  @media (max-width: calc(#{$bp-md-max} - 1px)) {
    max-width: $container-max-width-sm;
    padding-left: $screenshift-spacing-lg;
    padding-right: $screenshift-spacing-lg;
  }

  // Viewport <= XS
  @media (max-width: calc(#{$bp-sm-max} - 1px)) {
    max-width: $container-max-width-xs;
    padding-left: $screenshift-spacing-lg;
    padding-right: $screenshift-spacing-lg;
  }

  // Smallest Viewport
  @media (max-width: $bp-xs-max) {
    max-width: 100%;
    padding-left: $screenshift-spacing-lg;
    padding-right: $screenshift-spacing-lg;
  }
}

// --- Visual Debug Styling (Outline & Label) ---
// Applied ONLY when the attribute value is exactly "debug"
[screenshift="debug"] {
  position: relative;
  outline: 2px dashed rgba($screenshift-debug-color, 0.5);
  border-radius: $screenshift-spacing-md;
  outline-offset: 10px;
  &::after {
    display: block;
    content: "";
    position: absolute;
    transform: translate(-20px, 25px);
    color: white;
    font-size: 16px;
    font-weight: bold;
    padding: $screenshift-spacing $screenshift-spacing-md;
    background: $screenshift-debug-color;
    border-radius: $screenshift-spacing-lg;
    z-index: 99998; // High, but allow for other overlays if needed
    pointer-events: none;
  }

  // XXXL Viewport
  @media (min-width: $bp-xxxl-min) {
    &::after {
      content: "max-width: #{$container-max-width-xxxl} / #{$label-xxxl}";
    }
  }

  // XXL Viewport
  @media (max-width: calc(#{$bp-xxxl-min} - 1px)) {
    &::after {
      content: "#{$bp-xxxl-min} / #{$label-xxl} | max-width: #{$container-max-width-xxl}";
    }
  }

  // XL2 Viewport
  @media (max-width: calc(#{$bp-xxl-max} - 1px)) {
    &::after {
      content: "max-width: #{$container-max-width-xl2} / #{$label-xl2}";
    }
  }

  // XL Viewport
  @media (max-width: calc(#{$bp-xl2-max} - 1px)) {
    &::after {
      content: "max-width: #{$container-max-width-xl} / #{$label-xl}";
    }
  }

  // LG Viewport
  @media (max-width: calc(#{$bp-xl-max} - 1px)) {
    &::after {
      content: "max-width: #{$container-max-width-lg} / #{$label-lg}";
    }
  }

  // MD Viewport
  @media (max-width: calc(#{$bp-lg-max} - 1px)) {
    &::after {
      content: "max-width: #{$container-max-width-md} / #{$label-md}";
    }
  }

  // SM Viewport
  @media (max-width: calc(#{$bp-md-max} - 1px)) {
    &::after {
      content: "max-width: #{$container-max-width-sm} / #{$label-sm}";
    }
  }

  // XS Viewport
  @media (max-width: calc(#{$bp-sm-max} - 1px)) {
    &::after {
      content: "max-width: #{$container-max-width-xs} / #{$label-xs}";
    }
  }

  // Smallest Viewport
  @media (max-width: $bp-xs-max) {
    &::after {
      content: "width: 100% / #{$label-xs}";
    }
  }
}
