// 1. Import the responsive variables (though not used for debug display anymore,
//    they might be useful for users, so keep the import).
@import "screenshift-responsive";

// --- Variables for Container/Debug Styling (Define or use existing) ---
$screenshift-spacing-xs: 4px !default;
$screenshift-spacing-sm: 8px !default;
$screenshift-spacing-md: 12px !default;
$screenshift-spacing-lg: 16px !default;
$screenshift-spacing: $screenshift-spacing-sm !default; // Default general spacing
$screenshift-debug-color: #dc3545 !default; // Default debug color (Bootstrap danger red)

// --- Responsive Container Logic ---
// Applied when the [screenshift] attribute is present (including [screenshift="debug"])
[screenshift] {
  // --- Basic Container Styles ---
  display: block; // Ensure it behaves like a block
  box-sizing: border-box; // Consistent sizing
  width: 100%; // Start at full width
  margin-left: auto;
  margin-right: auto;

  // --- Define Container Breakpoints & Max Widths ---
  // DEFAULT (Largest / Desktop First)
  max-width: 1536px;
  padding-left: 0; // No padding on largest sizes by default
  padding-right: 0;

  // Media Query Overrides (using max-width)
  // Based on the container sizes from your previous example

  // Applies when VIEWPORT <= 1535px
  @media (max-width: 1535px) {
    max-width: 1280px;
  }

  // Applies when VIEWPORT <= 1279px
  @media (max-width: 1279px) {
    max-width: 1024px;
  }

  // Applies when VIEWPORT <= 1023px
  @media (max-width: 1023px) {
    max-width: 768px;
  }

  // Applies when VIEWPORT <= 767px
  @media (max-width: 767px) {
    max-width: 640px;
    padding-left: $screenshift-spacing-lg; // Add padding from here down
    padding-right: $screenshift-spacing-lg;
  }

  // Applies when VIEWPORT <= 639px
  @media (max-width: 639px) {
    max-width: 475px;
    padding-left: $screenshift-spacing-lg;
    padding-right: $screenshift-spacing-lg;
  }

  // Applies when VIEWPORT <= 474px
  @media (max-width: 474px) {
    max-width: 100%; // No max-width, use full width
    padding-left: $screenshift-spacing-lg;
    padding-right: $screenshift-spacing-lg;
  }
}

// --- Visual Debug Styling (Outline & Label) ---
// Applied ONLY when the attribute value is exactly "debug"
[screenshift="debug"] {
  // --- 1. Debug Outline ---
  position: relative; // Needed for positioning the ::after pseudo-element
  outline: 2px dashed rgba($screenshift-debug-color, 0.6); // Use rgba for transparency
  outline-offset: 10px;
  // Optional: Add border-radius matching container?
  // border-radius: $screenshift-spacing-xs;

  // --- 2. Base Styling for Debug ::after Label ---
  &::after {
    display: block; // Use block or inline-block
    position: absolute; // Position relative to the container element
    top: 0;
    // Position above the element and its outline
    $total-vertical-offset: $screenshift-spacing-xs + 2px;
    left: $screenshift-spacing-md + 10px; // Nudge it past the outline offset
    transform: translateY(calc(-100% - #{$total-vertical-offset}));

    // Visuals
    content: "..."; // Base content (overwritten by media queries)
    padding: $screenshift-spacing-xs $screenshift-spacing-md;
    background: $screenshift-debug-color; // Use the debug color variable
    color: white;
    border-radius: $screenshift-spacing-xs;
    font-size: 10px;
    font-family: sans-serif;
    font-weight: bold;
    white-space: nowrap;
    z-index: 99998; // High, but allow for other overlays if needed
    pointer-events: none;
  }

  // --- 3. Update Debug ::after Content within Media Queries ---
  // These media queries MIRROR the container logic, but only set the content string.

  // DEFAULT STATE (Largest viewport, largest container)
  @media (min-width: 1536px) {
    &::after {
      content: "Container state: >=1536px (1536px max-width)";
    }
  }

  // Viewport <= 1535px (Container max-width is 1280px)
  @media (max-width: 1535px) {
    &::after {
      content: "Container state: <=1535px (1280px max-width)";
    }
  }

  // Viewport <= 1279px (Container max-width is 1024px)
  @media (max-width: 1279px) {
    &::after {
      content: "Container state: <=1279px (1024px max-width)";
    }
  }

  // Viewport <= 1023px (Container max-width is 768px)
  @media (max-width: 1023px) {
    &::after {
      content: "Container state: <=1023px (768px max-width)";
    }
  }

  // Viewport <= 767px (Container max-width is 640px)
  @media (max-width: 767px) {
    &::after {
      content: "Container state: <=767px (640px max-width)";
    }
  }

  // Viewport <= 639px (Container max-width is 475px)
  @media (max-width: 639px) {
    &::after {
      content: "Container state: <=639px (475px max-width)";
    }
  }

  // Viewport <= 474px (Container max-width is 100%)
  @media (max-width: 474px) {
    &::after {
      content: "Container state: <=474px (100% width)";
    }
  }
}
